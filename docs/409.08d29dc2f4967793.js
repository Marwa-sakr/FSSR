"use strict";(self.webpackChunkspire=self.webpackChunkspire||[]).push([[409],{409:(Q,C,s)=>{s.r(C),s.d(C,{CourseComponent:()=>q});var v=s(4933),u=s(6286),g=s(1388),m=s(8381),_=s(4755),n=s(9401),d=s(9114),h=s(8097),p=s(1728),y=s(6737),b=s(787),T=s(430),e=s(2223),f=s(4242),A=s(823),N=s(1217);function D(r,a){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Name is required "),e.qZA())}function x(r,a){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," credit hours is required "),e.qZA())}function S(r,a){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Min credit hours is 3 "),e.qZA())}function I(r,a){if(1&r&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&r){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.type," ")}}function F(r,a){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Please choose restriction type "),e.qZA())}function J(r,a){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Value is required "),e.qZA())}function U(r,a){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"form",16)(2,"mat-form-field",17)(3,"mat-label"),e._uU(4,"Restriction Type"),e.qZA(),e.TgZ(5,"mat-select",18),e.YNc(6,I,2,2,"mat-option",19),e.qZA(),e.YNc(7,F,2,0,"mat-error",5),e.qZA(),e.TgZ(8,"mat-form-field",17)(9,"mat-label"),e._uU(10,"Value"),e.qZA(),e._UZ(11,"input",20),e.YNc(12,J,2,0,"mat-error",5),e.qZA(),e.TgZ(13,"button",21),e.NdJ("click",function(){const l=e.CHM(t).index,c=e.oxw();return e.KtG(c.deleteFromArray(l))}),e.TgZ(14,"mat-icon")(15,"span",10),e._uU(16," delete "),e.qZA()()()(),e.BQk()}if(2&r){const t=a.$implicit,o=a.index,i=e.oxw();let l,c;e.xp6(1),e.Q6J("formGroupName",o),e.xp6(5),e.Q6J("ngForOf",i.RestrictionTypes),e.xp6(1),e.Q6J("ngIf",null==(l=t.get("restricationTypeId"))?null:l.hasError("required")),e.xp6(5),e.Q6J("ngIf",null==(c=t.get("restricationValue"))?null:c.hasError("required"))}}function O(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.Add())}),e._uU(1," Add "),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("disabled",t.form.invalid||t.restrictionFormArray.invalid)}}function E(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.Edit())}),e._uU(1," Edit "),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("disabled",t.form.invalid||t.restrictionFormArray.invalid)}}let Z=(()=>{class r{get restrictionFormArray(){return this.form.get("CoursesRestricationsDTO")}constructor(t,o,i,l,c,w){this.fb=t,this.dialogRef=o,this.CourseService=i,this.RestrctionTypeService=l,this.data=c,this.SwalService=w,this.errorStateMatcher=new y.o,this.RestrictionTypes=[],this.form=this.fb.group({id:[0],course_Name:["",n.kI.required],credit_Hours:[3,[n.kI.required,n.kI.min(3)]],course_Description:[""],CoursesRestricationsDTO:this.fb.array([])}),this.action="add"}ngOnInit(){this.action=this.data.action,"edit"==this.action&&(this.data.obj.coursesRestrications.forEach(t=>{this.addRestrictionForm()}),this.data.obj.CoursesRestricationsDTO=this.data.obj.coursesRestrications,this.form.patchValue(this.data.obj)),this.RestrctionTypeService.getAll(m.UD.getAll).subscribe(t=>{this.RestrictionTypes=t})}addRestrictionForm(){const t=this.fb.group({id:[0],courseId:[0],restricationValue:[0,n.kI.required],restricationTypeId:[0,[n.kI.required]]});this.restrictionFormArray.push(t)}deleteFromArray(t){this.restrictionFormArray.removeAt(t)}Add(){let t=!1,o=this.data.dataSource;for(let i=0;i<this.data.dataSource.length;i++)if(o[i].course_Name.toLowerCase().replace(/\s/,"").includes(this.form.get("course_Name")?.value?.replace(/\s/,"").toLowerCase())){t=!0;break}t?this.SwalService.Fail("Course Name Already Exist"):this.CourseService.add(m._W.Add,this.form.value).subscribe({next:i=>this.dialogRef.close(),error:i=>console.log(i)})}Edit(){this.CourseService.Update(m._W.Update,this.form.value).subscribe({next:t=>this.dialogRef.close(),error:t=>console.log(t)})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(n.qu),e.Y36(u.so),e.Y36(f.v),e.Y36(f.v),e.Y36(u.WI),e.Y36(A.J))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-course-dilog"]],standalone:!0,features:[e.jDz],decls:34,vars:9,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"row","mt-2",3,"formGroup"],["appearance","outline",1,"col-md-6"],["matInput","","type","text","formControlName","course_Name",3,"errorStateMatcher"],[4,"ngIf"],["appearance","outline",1,"col-md-6","mb-2"],["matInput","","type","text","formControlName","course_Description"],["matInput","","type","number","min","3","formControlName","credit_Hours",3,"errorStateMatcher"],["color","primary","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"],[1,"material-symbols-outlined"],["formArrayName","CoursesRestricationsDTO"],[4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"d-flex","w-100","justify-content-center","gap-2"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],[3,"formGroupName"],["appearance","outline",1,"col-md-5","mb-2"],["formControlName","restricationTypeId"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","restricationValue"],["color","warn","mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"],[3,"value"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(t,o){if(1&t&&(e.TgZ(0,"h1",0),e._uU(1,"Courses Form"),e.qZA(),e.TgZ(2,"div",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),e._uU(6,"Course Name"),e.qZA(),e._UZ(7,"input",4),e.YNc(8,D,2,0,"mat-error",5),e.qZA(),e.TgZ(9,"mat-form-field",6)(10,"mat-label"),e._uU(11,"Course Description"),e.qZA(),e._UZ(12,"input",7),e.qZA(),e.TgZ(13,"mat-form-field",6)(14,"mat-label"),e._uU(15,"Credit hours"),e.qZA(),e._UZ(16,"input",8),e.YNc(17,x,2,0,"mat-error",5),e.YNc(18,S,2,0,"mat-error",5),e.qZA(),e._UZ(19,"hr")(20,"br"),e.TgZ(21,"p"),e._uU(22,"Add Restrictions"),e.qZA(),e.TgZ(23,"button",9),e.NdJ("click",function(){return o.addRestrictionForm()}),e.TgZ(24,"mat-icon")(25,"span",10),e._uU(26," add_circle "),e.qZA()()(),e.ynx(27,11),e.YNc(28,U,17,4,"ng-container",12),e.BQk(),e.qZA()(),e.TgZ(29,"div",13),e.YNc(30,O,2,1,"button",14),e.YNc(31,E,2,1,"button",14),e.TgZ(32,"button",15),e.NdJ("click",function(){return o.dialogRef.close()}),e._uU(33," Cancel "),e.qZA()()),2&t){let i,l,c;e.xp6(3),e.Q6J("formGroup",o.form),e.xp6(4),e.Q6J("errorStateMatcher",o.errorStateMatcher),e.xp6(1),e.Q6J("ngIf",null==(i=o.form.get("course_Name"))?null:i.hasError("required")),e.xp6(8),e.Q6J("errorStateMatcher",o.errorStateMatcher),e.xp6(1),e.Q6J("ngIf",null==(l=o.form.get("credit_Hours*"))?null:l.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(c=o.form.get("credit_Hours*"))?null:c.hasError("min")),e.xp6(10),e.Q6J("ngForOf",o.restrictionFormArray.controls),e.xp6(2),e.Q6J("ngIf","add"==o.action),e.xp6(1),e.Q6J("ngIf","edit"==o.action)}},dependencies:[u.Is,u.uh,u.xY,u.H8,n.u5,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.qQ,n.F,n.UX,n.sg,n.u,n.x0,n.CE,d.lN,d.KE,d.hX,d.TO,h.c,h.Nt,_.O5,p.ot,p.lW,p.RK,_.ax,b.LD,b.gD,N.ey,T.Ps,T.Hw],encapsulation:2}),r})();const R=function(){return["Home"]};let q=(()=>{class r{constructor(t,o,i){this.courseService=t,this.dialog=o,this.SwalService=i,this.datasource=[],this.displayedColumnsForGeneric=[{propertyName:"id",ColumnName:"Id"},{propertyName:"course_Name",ColumnName:"Course Name"},{propertyName:"course_Description",ColumnName:"Course Description"},{propertyName:"credit_Hours",ColumnName:"Credit Hours"}]}Add(){this.dialog.open(Z,{width:"50%",data:{...new g.A2,dataSource:this.datasource}}).afterClosed().subscribe(o=>this.ngOnInit())}ngOnInit(){this.courseService.getAll(m._W.getAll).subscribe({next:t=>{this.datasource=t},error:t=>{this.SwalService.Fail(t.error.message)}})}Edit(t){this.dialog.open(Z,{width:"50%",data:new g.A2("edit",t)}).afterClosed().subscribe(i=>this.ngOnInit())}Delete(t){t.swalResponse&&this.courseService.Delete(m._W.Delete,t.element.id).subscribe({next:o=>{this.ngOnInit(),this.SwalService.Success()},error:o=>this.SwalService.Fail(o.error.message)})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(f.v),e.Y36(u.uw),e.Y36(A.J))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-course"]],standalone:!0,features:[e.jDz],decls:1,vars:5,consts:[["BreadCrumbTitle","Course",3,"dataSource","ColumnDefs","BreadCrumbActive_item","BreadCrumbItems","OnAddNewClick","OnEditClick","OnDeleteClick"]],template:function(t,o){1&t&&(e.TgZ(0,"my-table",0),e.NdJ("OnAddNewClick",function(){return o.Add()})("OnEditClick",function(l){return o.Edit(l)})("OnDeleteClick",function(l){return o.Delete(l)}),e.qZA()),2&t&&e.Q6J("dataSource",o.datasource)("ColumnDefs",o.displayedColumnsForGeneric)("BreadCrumbActive_item","Course")("BreadCrumbItems",e.DdM(4,R))},dependencies:[v.bC,u.Is],encapsulation:2}),r})()}}]);