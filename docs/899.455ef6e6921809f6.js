"use strict";(self.webpackChunkspire=self.webpackChunkspire||[]).push([[899],{8899:(oe,b,l)=>{l.r(b),l.d(b,{CoureContentComponent:()=>te});var d=l(4755),N=l(1299),f=l(8381),_=l(3617),k=l(4933),q=l(1388),u=l(1728),m=l(6286),r=l(9401),p=l(9114),g=l(8097),T=l(787),Z=l(6737),e=l(2223);let y=(()=>{class a{emitFiles(t){const o=t&&t.item(0);this.onChange(o),this.file=o}constructor(t){this.host=t,this.file=null}writeValue(t){this.host.nativeElement.value="",this.file=null}registerOnChange(t){this.onChange=t}registerOnTouched(t){}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(e.SBq))},a.\u0275cmp=e.Xpm({type:a,selectors:[["file-upload"]],hostBindings:function(t,o){1&t&&e.NdJ("change",function(s){return o.emitFiles(s.target.files)})},standalone:!0,features:[e._Bn([{provide:r.JU,useExisting:a,multi:!0}]),e.jDz],decls:7,vars:1,consts:[[1,"file-drop-area"],["mat-raised-button","","color","primary",3,"click"],["type","file",1,"file-input"],["FileUpload",""]],template:function(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){e.CHM(n);const c=e.MAs(6);return e.KtG(c.click())}),e._uU(2,"Choose file"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA(),e._UZ(5,"input",2,3),e.qZA()}2&t&&(e.xp6(4),e.Oqu(o.file?o.file.name:" or drag and drop file here"))},dependencies:[u.ot,u.lW],styles:[".file-drop-area[_ngcontent-%COMP%]{border:1px dashed #7c7db3;border-radius:3px;position:relative;max-width:100%;margin-top:5px;padding:26px 20px 30px;transition:.2s}.file-input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:100%;width:100%;cursor:pointer;opacity:0}.file-msg[_ngcontent-%COMP%]{display:inline-block;margin-left:5px;font-size:12px;font-weight:500;color:#5b5bff}"]}),a})();var v=l(4242),x=l(1217);function D(a,i){if(1&a&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&a){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.type," ")}}function F(a,i){1&a&&(e.TgZ(0,"mat-error"),e._uU(1," Please Type "),e.qZA())}function J(a,i){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Name is required"),e.qZA())}let S=(()=>{class a{constructor(t,o){this.fb=t,this.materialTypeService=o,this.form=this.fb.group({id:0,materialTypeId:[0,r.kI.required],notes:[""],smesterCourseProfessorId:[0,r.kI.required],name:["",r.kI.required],file:["",r.kI.required]}),this.errorStateMatcher=new Z.o,this.materialTypes=[]}ngOnInit(){this.materialTypeService.getAll(f.IH.getAll).subscribe(t=>this.materialTypes=t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(r.qu),e.Y36(v.v))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-material-dialog"]],standalone:!0,features:[e.jDz],decls:24,vars:7,consts:[["mat-dialog-content",""],[1,"row","mt-2","gap-2",3,"formGroup"],["formControlName","file",1,"col-md-5"],["appearance","outline",1,"col-md-6"],["matInput","","formControlName","notes",3,"errorStateMatcher"],["appearance","outline",1,"col-md-5","mb-2"],["formControlName","materialTypeId"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","type","text","formControlName","name",3,"errorStateMatcher"],["mat-dialog-actions","",1,"d-flex","w-100","justify-content-center","gap-2"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"mat-dialog-close"],["mat-raised-button","","color","warn","mat-dialog-close",""],[3,"value"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"form",1),e._UZ(2,"file-upload",2),e.TgZ(3,"mat-form-field",3)(4,"mat-label"),e._uU(5,"Notes"),e.qZA(),e.TgZ(6,"textarea",4),e._uU(7,"          "),e.qZA()(),e.TgZ(8,"mat-form-field",5)(9,"mat-label"),e._uU(10,"Type"),e.qZA(),e.TgZ(11,"mat-select",6),e.YNc(12,D,2,2,"mat-option",7),e.qZA(),e.YNc(13,F,2,0,"mat-error",8),e.qZA(),e.TgZ(14,"mat-form-field",3)(15,"mat-label"),e._uU(16,"Name"),e.qZA(),e._UZ(17,"input",9),e.YNc(18,J,2,0,"mat-error",8),e.qZA()()(),e.TgZ(19,"div",10)(20,"button",11),e._uU(21," Save "),e.qZA(),e.TgZ(22,"button",12),e._uU(23,"Cancel"),e.qZA()()),2&t){let n,s;e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(5),e.Q6J("errorStateMatcher",o.errorStateMatcher),e.xp6(6),e.Q6J("ngForOf",o.materialTypes),e.xp6(1),e.Q6J("ngIf",null==(n=o.form.get("materialTypeId"))?null:n.hasError("required")),e.xp6(4),e.Q6J("errorStateMatcher",o.errorStateMatcher),e.xp6(1),e.Q6J("ngIf",null==(s=o.form.get("name"))?null:s.hasError("required")),e.xp6(2),e.Q6J("mat-dialog-close",o.form.value)}},dependencies:[r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,r.u5,p.lN,p.KE,p.hX,p.TO,y,u.ot,u.lW,m.Is,m.ZT,m.xY,m.H8,d.ax,d.O5,g.c,g.Nt,T.LD,T.gD,x.ey],encapsulation:2}),a})();var C=l(6012),A=l(5326),I=l(430),O=l(8280);function G(a,i){if(1&a&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&a){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.type," ")}}function P(a,i){1&a&&(e.TgZ(0,"mat-error"),e._uU(1," Please choose type "),e.qZA())}function w(a,i){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Maxgrade is required is required"),e.qZA())}let Q=(()=>{class a{constructor(t,o){this.fb=t,this.taskTypeService=o,this.form=this.fb.group({id:0,taskId:[0,r.kI.required],smesterCourseProfessorId:[0,r.kI.required],maxGrade:[0,r.kI.required],file:["",r.kI.required]}),this.errorStateMatcher=new Z.o,this.tasksType=[]}ngOnInit(){this.taskTypeService.getAll(f.QC.getAll).subscribe(t=>this.tasksType=t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(r.qu),e.Y36(v.v))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-task-dialog"]],standalone:!0,features:[e.jDz],decls:19,vars:6,consts:[["mat-dialog-content",""],[1,"row","mt-2","gap-2",3,"formGroup"],["formControlName","file",1,"col-md-12"],["appearance","outline",1,"col-md-12","mb-2"],["formControlName","taskId"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["appearance","outline",1,"col-md-12"],["matInput","","type","number","formControlName","maxGrade",3,"errorStateMatcher"],["mat-dialog-actions","",1,"d-flex","w-100","justify-content-center","gap-2"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"mat-dialog-close"],["mat-raised-button","","color","warn","mat-dialog-close",""],[3,"value"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"form",1),e._UZ(2,"file-upload",2),e.TgZ(3,"mat-form-field",3)(4,"mat-label"),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"mat-select",4),e.YNc(7,G,2,2,"mat-option",5),e.qZA(),e.YNc(8,P,2,0,"mat-error",6),e.qZA(),e.TgZ(9,"mat-form-field",7)(10,"mat-label"),e._uU(11,"Max Grade"),e.qZA(),e._UZ(12,"input",8),e.YNc(13,w,2,0,"mat-error",6),e.qZA()()(),e.TgZ(14,"div",9)(15,"button",10),e._uU(16," Save "),e.qZA(),e.TgZ(17,"button",11),e._uU(18,"Cancel"),e.qZA()()),2&t){let n,s;e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(6),e.Q6J("ngForOf",o.tasksType),e.xp6(1),e.Q6J("ngIf",null==(n=o.form.get("taskId"))?null:n.hasError("required")),e.xp6(4),e.Q6J("errorStateMatcher",o.errorStateMatcher),e.xp6(1),e.Q6J("ngIf",null==(s=o.form.get("maxGrade"))?null:s.hasError("required")),e.xp6(2),e.Q6J("mat-dialog-close",o.form.value)}},dependencies:[r.UX,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,r.u5,p.lN,p.KE,p.hX,p.TO,y,u.ot,u.lW,O.FA,m.Is,m.ZT,m.xY,m.H8,d.ax,d.O5,g.c,g.Nt,T.LD,T.gD,x.ey],encapsulation:2}),a})();function Y(a,i){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Grade is required"),e.qZA())}let E=(()=>{class a{constructor(t){this.fb=t,this.form=this.fb.group({finalGrade:[0,r.kI.required]}),this.errorStateMatcher=new Z.o}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(r.qu))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-grade-dialog"]],standalone:!0,features:[e.jDz],decls:12,vars:4,consts:[["mat-dialog-content",""],[1,"row","mt-2","gap-2",3,"formGroup"],["appearance","outline",1,"col-md-12"],["matInput","","type","number","formControlName","finalGrade",3,"errorStateMatcher"],[4,"ngIf"],["mat-dialog-actions","",1,"d-flex","w-100","justify-content-center","gap-2"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"mat-dialog-close"],["mat-raised-button","","color","warn","mat-dialog-close",""]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"mat-form-field",2)(3,"mat-label"),e._uU(4,"Final Grade"),e.qZA(),e._UZ(5,"input",3),e.YNc(6,Y,2,0,"mat-error",4),e.qZA()()(),e.TgZ(7,"div",5)(8,"button",6),e._uU(9," Save "),e.qZA(),e.TgZ(10,"button",7),e._uU(11," Cancel "),e.qZA()()),2&t){let n;e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(4),e.Q6J("errorStateMatcher",o.errorStateMatcher),e.xp6(1),e.Q6J("ngIf",null==(n=o.form.get("finalGrade"))?null:n.hasError("required")),e.xp6(2),e.Q6J("mat-dialog-close",o.form.value)}},dependencies:[r.UX,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,r.u5,p.lN,p.KE,p.hX,p.TO,u.ot,u.lW,m.Is,m.ZT,m.xY,m.H8,d.O5,g.c,g.Nt,T.LD],encapsulation:2}),a})();var j=l(2480),H=l(823);function L(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"mat-tab",12)(1,"my-table",13),e.NdJ("OnEditClick",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.AddFinalGrade(n))}),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(1),e.Q6J("TableOnly",!0)("dataSource",t.studentTableDataSource)("ColumnDefs",t.studentTableColumnDefs)("UseDeleteButton",!1)("UseEditButton",!0)}}function B(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"div",14)(1,"button",15),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.AddMaterial())}),e._uU(2," Add material "),e.qZA()()}}const U=function(){return{title:"Are you sure?",icon:"question",showCancelButton:!0}};function X(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("confirm",function(n){e.CHM(t);const s=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c.DeleteMaterial(n,s))}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA()()}2&a&&e.Q6J("swal",e.DdM(1,U))}function $(a,i){if(1&a&&(e.TgZ(0,"mat-card",19)(1,"mat-card-header")(2,"mat-card-title"),e._uU(3),e.qZA()(),e.TgZ(4,"mat-card-content")(5,"p"),e._uU(6),e.ALo(7,"date"),e.qZA()(),e.TgZ(8,"mat-card-actions",20)(9,"a",21)(10,"mat-icon")(11,"span",22),e._uU(12,"file_open"),e.qZA()()(),e.YNc(13,X,3,2,"button",23),e.qZA()()),2&a){const t=i.$implicit,o=e.oxw(2);e.xp6(3),e.Oqu(t.name),e.xp6(3),e.Oqu(e.lcZ(7,4,t.publishDate)),e.xp6(3),e.Q6J("href",t.materialUrl,e.LSH),e.xp6(4),e.Q6J("ngIf",o.isProfessor)}}function K(a,i){if(1&a&&(e.TgZ(0,"div",16)(1,"h3",17),e._uU(2),e.qZA(),e.YNc(3,$,14,6,"mat-card",18),e.qZA()),2&a){const t=i.$implicit;e.xp6(2),e.Oqu(t.type),e.xp6(1),e.Q6J("ngForOf",t.Materials)}}function z(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"div",25),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.AddTask())}),e.TgZ(1,"button",26),e._uU(2,"Add Task"),e.qZA()()}}function W(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("confirm",function(n){e.CHM(t);const s=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c.DeleteTask(n,s))}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA()()}2&a&&e.Q6J("swal",e.DdM(1,U))}function R(a,i){if(1&a&&(e.TgZ(0,"mat-card",19)(1,"mat-card-content")(2,"p"),e._uU(3),e.qZA()(),e.TgZ(4,"mat-card-actions",20)(5,"a",21)(6,"mat-icon")(7,"span",22),e._uU(8,"file_open"),e.qZA()()(),e.YNc(9,W,3,2,"button",23),e.qZA()()),2&a){const t=i.$implicit,o=e.oxw(2);e.xp6(3),e.hij("Max grade ",t.maxGrade,""),e.xp6(2),e.Q6J("href",t.taskUrl,e.LSH),e.xp6(4),e.Q6J("ngIf",o.isProfessor)}}function V(a,i){if(1&a&&(e.TgZ(0,"div",16)(1,"h3",17),e._uU(2),e.qZA(),e.YNc(3,R,10,3,"mat-card",18),e.qZA()),2&a){const t=i.$implicit;e.xp6(2),e.Oqu(t.type),e.xp6(1),e.Q6J("ngForOf",t.Tasks)}}const ee=function(){return["Course to be teached"]};let te=(()=>{class a{constructor(t,o,n,s){this.activatedRoute=t,this.SwalService=o,this.ApiService=n,this.dialog=s,this.studentTableDataSource=[],this.studentTableColumnDefs=[{propertyName:"fName",ColumnName:"First Name"},{propertyName:"lName",ColumnName:"Last Name"},{propertyName:"email",ColumnName:"Email"},{propertyName:"finalGrade",ColumnName:"Final Grade"}],this.semesterCourseProfessorId=0,this.currentCourseName="",this.isProfessor=!1,this.MaterialsPerMaterialType=[],this.TasksPerTaskType=[]}ngOnInit(){let t=localStorage.getItem("user"),o=t?JSON.parse(t):new q.y6;this.isProfessor=o.roles.toLowerCase().includes("professor"),this.activatedRoute.params.subscribe(n=>{this.semesterCourseProfessorId=parseInt(n.semesterCourseProfessorId),this.ApiService.GetById(f.NY.GetSemesterCourseProfessorById,this.semesterCourseProfessorId).subscribe(s=>{let c=s,M=[];c.sem_Course_Prof_Student.forEach(h=>{M.push({id:h.studenteId,fName:h.student.applicationUser.fName,lName:h.student.applicationUser.lName,email:h.student.applicationUser.email,finalGrade:h.courseFinalGrade})}),this.studentTableDataSource=M,this.GetMaterialTypes(c.material),this.GetTaskTypes(c.sem_Cou_Prof_task),this.currentCourseName=c.sem_Course_Prof_Student[0].semesterCourseProfessor.course.course_Name})})}AddMaterial(){this.dialog.open(S).afterClosed().subscribe(o=>{o.smesterCourseProfessorId=this.semesterCourseProfessorId,this.ApiService.add(f.jC.AddCourseMaterial,this.getFormData(o)).subscribe(n=>{this.ngOnInit()})})}DeleteMaterial(t,o){t&&this.ApiService.Delete(f.jC.DeleteCourseMaterial,o.id).subscribe(n=>{this.ngOnInit()})}AddTask(){this.dialog.open(Q,{width:"50%"}).afterClosed().subscribe(o=>{o.smesterCourseProfessorId=this.semesterCourseProfessorId,this.ApiService.add(f.QC.AddTaskToCourse,this.getFormData(o)).subscribe(n=>{this.ngOnInit()})})}DeleteTask(t,o){t&&this.ApiService.Delete(f.QC.DeleteTaskFromCourse,o.id).subscribe(n=>{this.ngOnInit()})}GetMaterialTypes(t){this.MaterialsPerMaterialType=[],t.forEach(o=>{let n=this.MaterialsPerMaterialType.find(s=>s.type==o.materialType.type);null==n?this.MaterialsPerMaterialType.push({type:o.materialType.type,Materials:[o]}):n.Materials.push(o)})}GetTaskTypes(t){this.TasksPerTaskType=[],t.forEach(o=>{let n=this.TasksPerTaskType.find(s=>s.type==o.task.type);null==n?this.TasksPerTaskType.push({type:o.task.type,Tasks:[o]}):n.Tasks.push(o)})}getFormData(t){const o=new FormData;return Object.keys(t).forEach(s=>{o.append(s,t[s])}),o}AddFinalGrade(t){this.dialog.open(E,{width:"30%"}).afterClosed().subscribe(n=>{this.ApiService.Update(`${f.qO.AddFinalGradeToStudent}/${t.id}/${this.semesterCourseProfessorId}/${n.finalGrade}`,{}).subscribe({next:c=>{this.SwalService.Success(),this.ngOnInit()},error:c=>{this.SwalService.Fail(c.error.message)}})})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(j.gz),e.Y36(H.J),e.Y36(v.v),e.Y36(m.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-coure-content"]],standalone:!0,features:[e.jDz],decls:16,vars:11,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"bg-white","mat-elevation-z3","rounded",3,"color"],["label","Students",4,"ngIf"],["label","Material"],[1,"p-2"],["class","d-flex justify-content-end w-100",4,"ngIf"],["class","row m-0 gap-4 justify-content-center text-black",4,"ngFor","ngForOf"],["label","Tasks"],["class","d-flex justify-content-end w-100",3,"click",4,"ngIf"],["label","Students"],[1,"rounded",3,"TableOnly","dataSource","ColumnDefs","UseDeleteButton","UseEditButton","OnEditClick"],[1,"d-flex","justify-content-end","w-100"],["mat-raised-button","","color","primary",3,"click"],[1,"row","m-0","gap-4","justify-content-center","text-black"],[1,"p-2","bg-dark","text-light","mt-2"],["class","col-3",4,"ngFor","ngForOf"],[1,"col-3"],[1,"d-flex","justify-content-center","gap-2"],["mat-icon-button","","color","primary","target","_blank",3,"href"],[1,"material-symbols-outlined"],["mat-icon-button","","color","warn",3,"swal","confirm",4,"ngIf"],["mat-icon-button","","color","warn",3,"swal","confirm"],[1,"d-flex","justify-content-end","w-100",3,"click"],["mat-raised-button","","color","primary"]],template:function(t,o){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-breadcrumb",3),e.TgZ(4,"h2"),e._uU(5),e.qZA(),e.TgZ(6,"mat-tab-group",4),e.YNc(7,L,2,5,"mat-tab",5),e.TgZ(8,"mat-tab",6)(9,"div",7),e.YNc(10,B,3,0,"div",8),e.YNc(11,K,4,2,"div",9),e.qZA()(),e.TgZ(12,"mat-tab",10)(13,"div",7),e.YNc(14,z,3,0,"div",11),e.YNc(15,V,4,2,"div",9),e.qZA()()()()()()),2&t&&(e.xp6(3),e.Q6J("title","Courses")("items",e.DdM(10,ee))("active_item","Courses"),e.xp6(2),e.Oqu(o.currentCourseName),e.xp6(1),e.Q6J("color","primary"),e.xp6(1),e.Q6J("ngIf",o.isProfessor),e.xp6(3),e.Q6J("ngIf",o.isProfessor),e.xp6(1),e.Q6J("ngForOf",o.MaterialsPerMaterialType),e.xp6(3),e.Q6J("ngIf",o.isProfessor),e.xp6(1),e.Q6J("ngForOf",o.TasksPerTaskType))},dependencies:[N.L,_.Nh,_.uX,_.SP,C.QW,C.a8,C.hq,C.dn,C.dk,C.n5,d.ax,d.O5,A.ii,A.iL,I.Ps,I.Hw,d.uU,k.bC,u.ot,u.lW,u.o6,u.RK,m.Is],encapsulation:2}),a})()}}]);